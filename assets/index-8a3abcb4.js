import{e as H,o as u,f as p,g as e,j as S,k as z,l as B,b as g,m as J,q as L,v as ie,t as E,F as j,x as T,y as r,z as re,A as q,B as ce,C as de,D as ue}from"./@vue-e9c45a6b.js";import{c as pe,a as me}from"./vue-router-03e9557c.js";import{P as A,d as K,r as _e,S as ve}from"./pdf-lib-aeb52646.js";import{M as U}from"./bootstrap-7365a320.js";import"./tslib-c149fca6.js";import"./@pdf-lib-486aeb75.js";import"./pako-67defa36.js";import"./@popperjs-8746c87e.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const fe="/images/logo_compressed.png",W=(o,n)=>{const t=o.__vccOpts||o;for(const[c,i]of n)t[c]=i;return t},he={},ge={class:"row g-0 justify-content-center"},be={class:"col col-12 col-md-6"},ye={class:"d-flex flex-wrap justify-content-between align-items-center p-3 rounded"},xe=e("div",{class:"d-flex align-items-center"},[e("img",{src:fe,alt:"Nocturne",height:"48",class:"me-2"}),e("span",{class:"fw-bold text-0 m-0"},"Nocturne")],-1),$e={class:"d-flex flex-wrap align-items-center"},we=e("a",{href:"/",class:"d-flex align-items-center text-0 fs-6 me-2 text-decoration-underline fw-500"},[e("span",null,"Reload")],-1),ke=e("span",null,"About",-1),De=e("a",{href:"https://github.com/kaangiray26/nocturne",class:"d-flex align-items-center text-0 fs-6 text-decoration-underline fw-500"},[e("span",{class:"me-2"},"GitHub"),e("span",{class:"bi bi-github"})],-1);function Pe(o,n){const t=H("router-link");return u(),p("div",ge,[e("div",be,[e("div",ye,[S(t,{to:"/",class:"me-2 mb-2 user-select-none"},{default:z(()=>[xe]),_:1}),e("div",$e,[we,S(t,{to:"/about",class:"d-flex align-items-center text-0 fs-6 me-2 text-decoration-underline fw-500"},{default:z(()=>[ke]),_:1}),De])])])])}const Ce=W(he,[["render",Pe]]),Ie={},Se={class:"row g-0 justify-content-center flex-grow"},Re=B('<div class="col col-12 col-md-6 d-flex justify-content-center"><div class="d-flex flex-fill justify-content-end align-items-end p-3"><a href="https://buzl.uk" class="d-flex align-items-center text-0 fs-6"><span class="me-2">kaangiray26</span><span class="material-icons-outlined">face</span></a></div></div>',1),Ne=[Re];function Fe(o,n){return u(),p("div",Se,Ne)}const Ae=W(Ie,[["render",Fe]]),Ee={class:"d-flex flex-column flex-grow"},je={__name:"App",setup(o){return(n,t)=>{const c=H("router-view");return u(),p("div",Ee,[S(Ce),S(c),S(Ae)])}}},Ve="/images/pipes_compressed.png",Me={class:"row g-0 justify-content-center"},Oe={class:"col col-12 col-md-6 d-flex justify-content-center"},Le={class:"row w-100 g-3 px-2"},Be={class:"col-auto"},Te={class:"input-group mb-3"},We=e("span",{class:"material-icons-outlined mb-2"},"file_upload",-1),ze=e("span",null,"Choose a PDF to start editing",-1),qe=[We,ze],Ke=e("ins",{class:"adsbygoogle",style:{display:"flex"},"data-ad-format":"fluid","data-ad-layout-key":"-f5+5l+6u-dz+17","data-ad-client":"ca-pub-4228715284139659","data-ad-slot":"5647241715"},null,-1),He=B('<div class="col"><div class="row g-3"><div class="col-12"><div class="banner-wide shadow p-3"><h2 class="text-4 fw-bold text-nowrap">Why Nocturne?</h2><p>Nocturne is a free, open-source, and client-side PDF editor that respects your privacy. All your PDFs are processed <b class="text-10">locally</b> on your device.</p></div></div><div class="col"><div class="banner-square shadow p-3"><h2 class="text-4 fw-bold">Pipelines</h2><img src="'+Ve+'" class="img-fluid rounded mb-2"><span>Automate your workflow with Nocturne&#39;s pipelines, which allow you to chain multiple operations together.</span></div></div><div class="col"><div class="banner-square shadow p-3"><h2 class="text-4 fw-bold">Features</h2><ul><li>Rotate</li><li>Add</li><li>Remove</li><li>Extract</li><li>Reverse</li><li>Enumerate</li><li>Scale</li><li>Metadata</li><li>Rename</li></ul></div></div></div></div>',1),Je={__name:"Introduction",emits:["file_input"],setup(o,{emit:n}){const t=g(null);async function c(_){_.preventDefault()}async function i(_){_.preventDefault(),t.value.classList.add("dragover")}async function a(_){_.stopPropagation(),t.value.classList.remove("dragover")}async function l(_){_.preventDefault(),t.value.classList.remove("dragover"),n("file_input",{target:{files:_.dataTransfer.files}})}return(_,w)=>(u(),p("div",Me,[e("div",Oe,[e("div",Le,[e("div",Be,[e("div",Te,[e("label",{ref_key:"droparea",ref:t,class:"upload-label dropable rounded shadow",for:"pdfupload",onDragenter:i,onDragover:c,onDrop:l,onDragexit:a},qe,544),e("input",{type:"file",class:"form-control",id:"pdfupload",accept:"application/pdf",onChange:w[0]||(w[0]=P=>n("file_input",P)),hidden:""},null,32)]),Ke]),He])])]))}},Ue={class:"modal-dialog modal-dialog-centered"},Ye={class:"modal-content"},Ge=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Save Pipeline"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},Xe={class:"input-group mb-3"},Ze={__name:"Save",props:{pipeline:{type:Array,required:!0}},setup(o,{expose:n}){const t=o,c=g(""),i=g(null),a=g(null);function l(){i.value.show()}function _(){i.value.hide()}async function w(){console.log("Saving pipeline");let P=t.pipeline,x=JSON.parse(localStorage.getItem("pipelines"));x==null&&(x=[]),x.push({name:c.value,pipeline:P}),localStorage.setItem("pipelines",JSON.stringify(x)),_()}return n({show:l,hide:_}),J(()=>{i.value=new U(a.value,{keyboard:!1,backdrop:"static"})}),(P,x)=>(u(),p("div",{ref_key:"modalEl",ref:a,class:"modal",tabindex:"-1"},[e("div",Ue,[e("div",Ye,[Ge,e("div",Qe,[e("div",Xe,[L(e("input",{"onUpdate:modelValue":x[0]||(x[0]=R=>c.value=R),type:"text",class:"form-control",placeholder:"Pick a name for your pipeline","aria-label":"Recipient's username"},null,512),[[ie,c.value]]),e("button",{class:"btn btn-outline-dark",type:"button",onClick:w},"Save")])])])])],512))}},et={class:"modal-dialog modal-dialog-centered"},tt={class:"modal-content"},at=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Select Pipeline"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ot={class:"modal-body"},st={key:0},nt=e("p",{class:"text-center"},"No saved pipelines",-1),lt=[nt],it={class:"list-group"},rt={class:"list-group-item"},ct={class:"d-flex justify-content-between align-items-center"},dt={class:"d-flex"},ut=["onClick"],pt=["onClick"],mt={__name:"Select",emits:["load"],setup(o,{expose:n,emit:t}){const c=g(null),i=g(null),a=g([]);function l(){a.value=JSON.parse(localStorage.getItem("pipelines"))||[],c.value.show()}function _(){c.value.hide()}async function w(x){t("load",x.pipeline),_()}async function P(x){a.value.splice(x,1),localStorage.setItem("pipelines",JSON.stringify(a.value))}return n({show:l,hide:_}),J(()=>{c.value=new U(i.value,{keyboard:!1,backdrop:"static"})}),(x,R)=>(u(),p("div",{ref_key:"modalEl",ref:i,class:"modal",tabindex:"-1"},[e("div",et,[e("div",tt,[at,e("div",ot,[a.value.length?E("",!0):(u(),p("div",st,lt)),e("ul",it,[(u(!0),p(j,null,T(a.value,(h,V)=>(u(),p("li",rt,[e("div",ct,[e("div",null,r(h.name),1),e("div",dt,[e("button",{class:"btn btn-outline-dark me-2",type:"button",onClick:M=>w(h)},"Load",8,ut),e("button",{class:"btn btn-outline-danger",type:"button",onClick:M=>P(V)},"Delete",8,pt)])])]))),256))])])])])],512))}},_t={class:"operation"},vt={class:"d-flex flex-column"},ft={class:"d-flex mb-2"},ht=e("span",{class:"material-icons-outlined"}," cancel ",-1),gt=[ht],bt={class:"theme-btn bg-4 text-0"},yt={class:"material-icons-outlined"},xt={class:"form-floating mb-2"},$t=["value"],wt={for:"floatingInputValue1"},kt={class:"form-floating"},Dt=["value"],Pt={for:"floatingInputValue2"},Ct={__name:"Rotate",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",_t,[e("div",vt,[e("div",ft,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},gt),e("div",bt,[e("span",yt,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",xt,[e("input",{type:"number",class:"form-control",id:"floatingInputValue1",value:o.op.params[0].value,onInput:a[1]||(a[1]=l=>{o.op.params[0].value=l.target.value,c()})},null,40,$t),e("label",wt,r(o.op.params[0].name),1)]),e("div",kt,[e("input",{type:"text",class:"form-control",id:"floatingInputValue2",value:o.op.params[1].value,onInput:a[2]||(a[2]=l=>{o.op.params[1].value=l.target.value,c()})},null,40,Dt),e("label",Pt,r(o.op.params[1].name),1)])])]))}},It={class:"operation"},St={class:"d-flex flex-column"},Rt={class:"d-flex mb-2"},Nt=e("span",{class:"material-icons-outlined"}," cancel ",-1),Ft=[Nt],At={class:"theme-btn bg-4 text-0"},Et={class:"material-icons-outlined"},jt={class:"mb-2"},Vt={class:"form-floating"},Mt=["value"],Ot={for:"floatingInputValue"},Lt={__name:"Add",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}async function i(a){t.op.params[0].value=a.target.files[0]}return(a,l)=>(u(),p("div",It,[e("div",St,[e("div",Rt,[e("div",{class:"theme-btn",onClick:l[0]||(l[0]=_=>n("remove_operation",t.index))},Ft),e("div",At,[e("span",Et,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",jt,[e("input",{class:"form-control",type:"file",onChange:i},null,32)]),e("div",Vt,[e("input",{type:"text",class:"form-control",id:"floatingInputValue",value:o.op.params[1].value,onInput:l[1]||(l[1]=_=>{o.op.params[1].value=_.target.value,c()})},null,40,Mt),e("label",Ot,r(o.op.params[1].name),1)])])]))}},Bt={class:"operation"},Tt={class:"d-flex flex-column"},Wt={class:"d-flex mb-2"},zt=e("span",{class:"material-icons-outlined"}," cancel ",-1),qt=[zt],Kt={class:"theme-btn bg-4 text-0"},Ht={class:"material-icons-outlined"},Jt={class:"form-floating"},Ut=["value"],Yt={for:"floatingInputValue"},Gt={__name:"Remove",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",Bt,[e("div",Tt,[e("div",Wt,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},qt),e("div",Kt,[e("span",Ht,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",Jt,[e("input",{type:"text",class:"form-control",id:"floatingInputValue",value:o.op.params[0].value,onInput:a[1]||(a[1]=l=>{o.op.params[0].value=l.target.value,c()})},null,40,Ut),e("label",Yt,r(o.op.params[0].name),1)])])]))}},Qt={class:"operation"},Xt={class:"d-flex flex-column"},Zt={class:"d-flex mb-2"},ea=e("span",{class:"material-icons-outlined"}," cancel ",-1),ta=[ea],aa={class:"theme-btn bg-4 text-0"},oa={class:"material-icons-outlined"},sa={class:"form-floating"},na=["value"],la={for:"floatingInputValue"},ia={__name:"Extract",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",Qt,[e("div",Xt,[e("div",Zt,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},ta),e("div",aa,[e("span",oa,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",sa,[e("input",{type:"text",class:"form-control",id:"floatingInputValue",value:o.op.params[0].value,onInput:a[1]||(a[1]=l=>{o.op.params[0].value=l.target.value,c()})},null,40,na),e("label",la,r(o.op.params[0].name),1)])])]))}},ra={class:"operation"},ca={class:"d-flex flex-column"},da={class:"d-flex"},ua=e("span",{class:"material-icons-outlined"}," cancel ",-1),pa=[ua],ma={class:"theme-btn bg-4 text-0"},_a={class:"material-icons-outlined"},va={__name:"Reverse",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;return(c,i)=>(u(),p("div",ra,[e("div",ca,[e("div",da,[e("div",{class:"theme-btn",onClick:i[0]||(i[0]=a=>n("remove_operation",t.index))},pa),e("div",ma,[e("span",_a,r(t.op.icon),1),e("span",null,r(t.op.name),1)])])])]))}},fa={class:"operation"},ha={class:"d-flex flex-column"},ga={class:"d-flex"},ba=e("span",{class:"material-icons-outlined"}," cancel ",-1),ya=[ba],xa={class:"theme-btn bg-4 text-0"},$a={class:"material-icons-outlined"},wa={__name:"Enumerate",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;return(c,i)=>(u(),p("div",fa,[e("div",ha,[e("div",ga,[e("div",{class:"theme-btn",onClick:i[0]||(i[0]=a=>n("remove_operation",t.index))},ya),e("div",xa,[e("span",$a,r(t.op.icon),1),e("span",null,r(t.op.name),1)])])])]))}},ka={class:"operation"},Da={class:"d-flex flex-column"},Pa={class:"d-flex mb-2"},Ca=e("span",{class:"material-icons-outlined"}," cancel ",-1),Ia=[Ca],Sa={class:"theme-btn bg-4 text-0"},Ra={class:"material-icons-outlined"},Na={class:"form-floating mb-2"},Fa=["value"],Aa={for:"floatingInputValue1"},Ea={class:"form-floating mb-2"},ja=["value"],Va={for:"floatingInputValue2"},Ma={class:"form-floating"},Oa=["value"],La={for:"floatingInputValue3"},Ba={__name:"Scale",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",ka,[e("div",Da,[e("div",Pa,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},Ia),e("div",Sa,[e("span",Ra,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",Na,[e("input",{type:"number",class:"form-control",id:"floatingInputValue1",value:o.op.params[0].value,onInput:a[1]||(a[1]=l=>{o.op.params[0].value=l.target.value,c()})},null,40,Fa),e("label",Aa,r(o.op.params[0].name),1)]),e("div",Ea,[e("input",{type:"number",class:"form-control",id:"floatingInputValue2",value:o.op.params[1].value,onInput:a[2]||(a[2]=l=>{o.op.params[1].value=l.target.value,c()})},null,40,ja),e("label",Va,r(o.op.params[1].name),1)]),e("div",Ma,[e("input",{type:"text",class:"form-control",id:"floatingInputValue3",value:o.op.params[2].value,onInput:a[3]||(a[3]=l=>{o.op.params[2].value=l.target.value,c()})},null,40,Oa),e("label",La,r(o.op.params[2].name),1)])])]))}},Ta={class:"operation"},Wa={class:"d-flex flex-column"},za={class:"d-flex mb-2"},qa=e("span",{class:"material-icons-outlined"}," cancel ",-1),Ka=[qa],Ha={class:"theme-btn bg-4 text-0"},Ja={class:"material-icons-outlined"},Ua=["id","value","onInput"],Ya=["for"],Ga={__name:"Metadata",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",Ta,[e("div",Wa,[e("div",za,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},Ka),e("div",Ha,[e("span",Ja,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),(u(!0),p(j,null,T(o.op.params,(l,_)=>(u(),p("div",{class:re(["form-floating",{"mt-2":_>0}])},[e("input",{type:"text",class:"form-control",id:l.name,value:l.value,onInput:w=>{l.value=w.target.value,c()}},null,40,Ua),e("label",{for:l.name},r(l.name),9,Ya)],2))),256))])]))}},Qa={class:"operation"},Xa={class:"d-flex flex-column"},Za={class:"d-flex mb-2"},eo=e("span",{class:"material-icons-outlined"}," cancel ",-1),to=[eo],ao={class:"theme-btn bg-4 text-0"},oo={class:"material-icons-outlined"},so={class:"form-floating"},no=["value"],lo={for:"floatingInputValue"},io={__name:"Rename",props:["op","index"],emits:["remove_operation","update_operation"],setup(o,{emit:n}){const t=o;async function c(){n("update_operation",t.index,t.op)}return(i,a)=>(u(),p("div",Qa,[e("div",Xa,[e("div",Za,[e("div",{class:"theme-btn",onClick:a[0]||(a[0]=l=>n("remove_operation",t.index))},to),e("div",ao,[e("span",oo,r(t.op.icon),1),e("span",null,r(t.op.name),1)])]),e("div",so,[e("input",{type:"text",class:"form-control",id:"floatingInputValue",value:o.op.params[0].value,onInput:a[1]||(a[1]=l=>{o.op.params[0].value=l.target.value,c()})},null,40,no),e("label",lo,r(o.op.params[0].name),1)])])]))}},ro={key:0,class:"d-flex justify-content-center align-items-center cover-all position-absolute z-1"},co=e("div",{class:"position-absolute bg-1 cover-all opacity-50"},null,-1),uo=e("div",{class:"d-flex circle bg-black p-2"},[e("div",{class:"spinner-border text-4",role:"status"})],-1),po=[co,uo],mo={key:1},_o={key:2},vo={class:"row g-0 justify-content-center"},fo={class:"col col-12 col-md-6 px-3"},ho={class:"d-flex flex-column text-4 bg-0 p-3 rounded shadow mb-3"},go=e("h3",null,"File Details",-1),bo={class:"d-flex flex-wrap"},yo={class:"text-value mb-2 me-2"},xo={class:"text-value mb-2 me-2"},$o={class:"text-value mb-2 me-2"},wo={class:"mb-2"},ko=e("span",{class:"material-icons-outlined"}," description ",-1),Do={key:0,class:"fw-bold"},Po={key:1,class:"fw-bold"},Co={class:"mb-2"},Io={class:"d-flex flex-column text-value rounded p-2"},So={class:"d-flex flex-wrap"},Ro=e("span",{class:"material-icons-outlined"},"refresh",-1),No=e("span",null,"Rotate",-1),Fo=[Ro,No],Ao=e("span",{class:"material-icons-outlined"},"layers",-1),Eo=e("span",null,"Add",-1),jo=[Ao,Eo],Vo=e("span",{class:"material-icons-outlined"},"delete",-1),Mo=e("span",null,"Remove",-1),Oo=[Vo,Mo],Lo=e("span",{class:"material-icons-outlined"},"call_split",-1),Bo=e("span",null,"Extract",-1),To=[Lo,Bo],Wo=e("span",{class:"material-icons-outlined"},"low_priority",-1),zo=e("span",null,"Reverse",-1),qo=[Wo,zo],Ko=e("span",{class:"material-icons-outlined"},"format_list_numbered",-1),Ho=e("span",null,"Enumerate",-1),Jo=[Ko,Ho],Uo=e("span",{class:"material-icons-outlined"},"aspect_ratio",-1),Yo=e("span",null,"Scale",-1),Go=[Uo,Yo],Qo=e("span",{class:"material-icons-outlined"},"info",-1),Xo=e("span",null,"Metadata",-1),Zo=[Qo,Xo],es=e("span",{class:"material-icons-outlined"},"title",-1),ts=e("span",null,"Rename",-1),as=[es,ts],os={class:"d-flex flex-column text-4 bg-0 p-3 rounded shadow mb-3"},ss=e("h3",null,"Pipeline",-1),ns=e("span",{class:"material-icons-outlined"},"inventory_2",-1),ls=[ns],is=e("span",{class:"material-icons-outlined"},"check_box_outline_blank",-1),rs=[is],cs={class:"operations"},ds=e("div",{class:"d-flex justify-content-center pb-2"},[e("span",{class:"material-icons-outlined"},"arrow_downward")],-1),us=[ds],ps=e("div",{class:"d-flex"},[e("span",null,"Drag and drop operations here, or just click on them.")],-1),ms=[ps],_s={class:"d-flex justify-content-end align-items-center"},vs=e("span",{class:"material-icons"},"save",-1),fs=e("span",null,"Save",-1),hs=[vs,fs],gs=e("span",{class:"material-icons"},"play_arrow",-1),bs=e("span",null,"Run",-1),ys=[gs,bs],xs={key:1,class:"theme-btn bg-3 text-4",type:"button",disabled:""},$s=e("span",{class:"spinner-border spinner-border-sm me-1","aria-hidden":"true"},null,-1),ws=e("span",{role:"status"},"Running...",-1),ks=[$s,ws],Ds={__name:"Workspace",setup(o){const n=g(null),t=g(null),c=g(null),i=g(null),a=g(null),l=g(!1),_=g(!1),w=g(!1),P=g(!1),x=g(null),R=g(null),h=g([]),V={Rotate:Ct,Add:Lt,Remove:Gt,Extract:ia,Reverse:va,Enumerate:wa,Scale:Ba,Metadata:Ga,Rename:io};function M(d){const s=["B","KB","MB","GB","TB"];let v=0;for(;d>=1024;)d/=1024,v++;return`${d.toFixed(2)} ${s[v]}`}async function Y(d){let s=d.target.files[0];if(s.type!=="application/pdf"){alert("Please upload a PDF file.");return}l.value=!0,n.value=s,s.arrayBuffer().then(v=>{R.value=v,A.load(R.value).then(N=>{t.value=N,c.value=t.value.embedStandardFont(ve.Helvetica),P.value=!0,l.value=!1})}).catch(v=>{console.log(v)})}async function k(d){if(d==="rotate"){h.value.push({name:"Rotate",icon:"refresh",params:[{name:"Angle",value:90},{name:"Pages",value:"all"}]});return}if(d==="add"){h.value.push({name:"Add",icon:"layers",params:[{name:"File",value:""},{name:"Pages",value:"all"}]});return}if(d==="remove"){h.value.push({name:"Remove",icon:"delete",params:[{name:"Pages",value:"1"}]});return}if(d==="extract"){h.value.push({name:"Extract",icon:"call_split",params:[{name:"Pages",value:"1-2"}]});return}if(d==="reverse"){h.value.push({name:"Reverse",icon:"low_priority",params:[]});return}if(d==="enumerate"){h.value.push({name:"Enumerate",icon:"format_list_numbered",params:[]});return}if(d==="scale"){h.value.push({name:"Scale",icon:"aspect_ratio",params:[{name:"Width",value:1},{name:"Height",value:1},{name:"Pages",value:"all"}]});return}if(d==="metadata"){h.value.push({name:"Metadata",icon:"info",params:[{name:"Title",value:t.value.getTitle()},{name:"Author",value:t.value.getAuthor()},{name:"Subject",value:t.value.getSubject()},{name:"Keywords",value:t.value.getKeywords()},{name:"Producer",value:t.value.getProducer()},{name:"Creator",value:t.value.getCreator()},{name:"Creation Date",value:t.value.getCreationDate()},{name:"Modification Date",value:t.value.getModificationDate()}]});return}if(d==="rename"){h.value.push({name:"Rename",icon:"title",params:[{name:"Name",value:n.value.name.split(".")[0]}]});return}}async function D(d){d.preventDefault(),x.value.classList.remove("dragover");let s=d.dataTransfer.getData("text");k(s)}async function C(d){d.dataTransfer.setData("text",d.target.getAttribute("data"))}async function G(d){d.preventDefault()}async function Q(d){d.preventDefault(),x.value.classList.add("dragover")}async function X(d){d.stopPropagation(),x.value.classList.remove("dragover")}async function Z(d){h.value.splice(d,1)}async function ee(d,s){h.value[d]=s}async function te(){h.value=[]}async function ae(){if(!h.value.length){alert("Please add some operations to the pipeline.");return}i.value.show()}async function oe(){a.value.show()}async function se(d){h.value=d}async function ne(){_.value=!0;let d=n.value.name,s=await A.load(R.value);for(const m of h.value){if(m.name==="Rotate"){let b=s.getPages(),f=parseInt(m.params[0].value),$=m.params[1].value;$==="all"?b.forEach(y=>y.setRotation(K(y.getRotation().angle+f))):$.split(",").forEach(y=>b[parseInt(y)-1].setRotation(K(b[parseInt(y)-1].getRotation().angle+f)));continue}if(m.name==="Add"){let b=m.params[0].value,f=m.params[1].value,$=await b.arrayBuffer(),y=await A.load($),I=await s.copyPages(y,y.getPageIndices());f==="all"?I.map(F=>s.addPage(F)):f.split(",").map(F=>s.addPage(I[parseInt(F)-1]));continue}if(m.name==="Remove"){m.params[0].value.split(",").sort((f,$)=>$-f).map(f=>s.removePage(parseInt(f)-1));continue}if(m.name==="Extract"){let b=await A.create(),f=m.params[0].value.split("-").map(y=>parseInt(y)-1);f=[...Array(f.slice(-1)[0]+1).keys()].slice(f[0]),(await b.copyPages(s,f)).map(y=>b.addPage(y)),s=b;continue}if(m.name==="Reverse"){let b=await A.create();(await b.copyPages(s,s.getPageIndices())).reverse().map($=>b.addPage($)),s=b;continue}if(m.name==="Enumerate"){s.getPages().map((f,$)=>{let y=`${$+1}`,I=c.value.widthOfTextAtSize(y,12),F=c.value.heightAtSize(12);f.drawText(y,{x:f.getWidth()-I-12,y:F+12,size:12,color:_e(0,0,0)})});continue}if(m.name==="Scale"){let b=s.getPages(),f=parseFloat(m.params[0].value),$=parseFloat(m.params[1].value),y=m.params[2].value;y==="all"?b.map(I=>I.scale(f,$)):y.split(",").map(I=>b[parseInt(I)-1].scale(f,$));continue}if(m.name==="Metadata"){s.setTitle(m.params[0].value||""),s.setAuthor(m.params[1].value||""),s.setSubject(m.params[2].value||""),s.setKeywords(m.params[3].value?m.params[3].value.split(","):[]),s.setProducer(m.params[4].value||""),s.setCreator(m.params[5].value||""),s.setCreationDate(new Date(m.params[6].value)),s.setModificationDate(new Date(m.params[7].value));continue}if(m.name==="Rename"){d=m.params[0].value+".pdf";continue}}let v=await s.save(),N=new Blob([v],{type:"application/pdf"}),le=URL.createObjectURL(N),O=document.createElement("a");O.href=le,O.download=d,O.click(),_.value=!1}return(d,s)=>(u(),p(j,null,[l.value?(u(),p("div",ro,po)):E("",!0),P.value?(u(),p("div",_o,[e("div",vo,[e("div",fo,[e("div",ho,[go,e("div",bo,[e("span",yo,r(n.value.name),1),e("span",xo,r(M(n.value.size)),1),e("span",$o,r(t.value.getPageCount())+" pages",1)]),e("div",wo,[e("button",{type:"button",class:"theme-btn bg-13 text-0 hoverable",onClick:s[0]||(s[0]=v=>w.value=!w.value)},[ko,w.value?(u(),p("span",Do,"Hide metadata")):(u(),p("span",Po,"Show metadata"))])]),L(e("div",Co,[e("div",Io,[e("pre",null,"Title             : "+r(t.value.getTitle())+`
Author            : `+r(t.value.getAuthor())+`
Subject           : `+r(t.value.getSubject())+`
Creator           : `+r(t.value.getCreator())+`
Keywords          : `+r(t.value.getKeywords())+`
Producer          : `+r(t.value.getProducer())+`
Creation Date     : `+r(t.value.getCreationDate())+`
Modification Date : `+r(t.value.getModificationDate()),1)])],512),[[q,w.value]]),e("div",So,[e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"rotate",draggable:"true",onDragstart:C,onDrop:D,onClick:s[1]||(s[1]=v=>k("rotate"))},Fo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"add",draggable:"true",onDragstart:C,onDrop:D,onClick:s[2]||(s[2]=v=>k("add"))},jo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"remove",draggable:"true",onDragstart:C,onDrop:D,onClick:s[3]||(s[3]=v=>k("remove"))},Oo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"extract",draggable:"true",onDragstart:C,onDrop:D,onClick:s[4]||(s[4]=v=>k("extract"))},To,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"reverse",draggable:"true",onDragstart:C,onDrop:D,onClick:s[5]||(s[5]=v=>k("reverse"))},qo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"enumerate",draggable:"true",onDragstart:C,onDrop:D,onClick:s[6]||(s[6]=v=>k("enumerate"))},Jo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"scale",draggable:"true",onDragstart:C,onDrop:D,onClick:s[7]||(s[7]=v=>k("scale"))},Go,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"metadata",draggable:"true",onDragstart:C,onDrop:D,onClick:s[8]||(s[8]=v=>k("metadata"))},Zo,32),e("button",{type:"button",class:"theme-btn bg-4 text-0 mb-2 me-2",data:"rename",draggable:"true",onDragstart:C,onDrop:D,onClick:s[9]||(s[9]=v=>k("rename"))},as,32)])]),e("div",os,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[ss,e("div",{class:"d-flex"},[e("div",{class:"theme-btn",onClick:oe},ls),e("div",{class:"theme-btn",onClick:te},rs)])]),e("div",cs,[(u(!0),p(j,null,T(h.value,(v,N)=>(u(),p("div",null,[L(e("div",null,us,512),[[q,N>0]]),(u(),ce(de(V[v.name]),{op:v,index:N,onRemove_operation:Z,onUpdate_operation:ee},null,40,["op","index"]))]))),256)),e("div",{ref_key:"droparea",ref:x,class:"operation droppable",onDragover:G,onDrop:D,onDragenter:Q,onDragexit:X},ms,544)])]),e("div",_s,[e("button",{type:"button",class:"theme-btn bg-4 text-0 me-2",onClick:ae},hs),_.value?E("",!0):(u(),p("button",{key:0,type:"button",class:"theme-btn bg-4 text-0",onClick:ne},ys)),_.value?(u(),p("button",xs,ks)):E("",!0)])])])])):(u(),p("div",mo,[S(Je,{onFile_input:Y})])),S(Ze,{ref_key:"saveModal",ref:i,pipeline:h.value},null,8,["pipeline"]),S(mt,{ref_key:"selectModal",ref:a,onLoad:se},null,512)],64))}},Ps={},Cs={class:"row g-0 justify-content-center"},Is=B('<div class="col col-12 col-md-6 px-3"><div class="d-flex flex-column"><h2>About</h2><hr><ins class="adsbygoogle" style="display:flex;" data-ad-format="fluid" data-ad-layout-key="-f5+5l+6u-dz+17" data-ad-client="ca-pub-4228715284139659" data-ad-slot="5647241715"></ins><h3>Nocturne: Your Free, Open-Source PDF Editor</h3><p>At Nocturne, we believe that every document tells a story, and we&#39;re here to help you craft, modify, and refine those stories effortlessly. Our innovative PDF editor, adorned with the wise and watchful owl as its mascot, empowers you to seamlessly take control of your PDF files like never before.</p><h3>Unleash Your Creativity with Client-Side Editing</h3><p>Nocturne introduces a refreshing approach to PDF editing - it&#39;s all about you and your privacy. Our client-side PDF editor ensures that your sensitive information remains in your hands, never leaving your device. With Nocturne, you can effortlessly rotate, add, remove, enumerate and even merge multiple PDFs into a cohesive masterpiece, all without the need to upload your files to the cloud.</p><h3>Pipelines: Your Path to Automated Efficiency</h3><p>Imagine the power of automation at your fingertips. Nocturne&#39;s revolutionary pipeline system allows you to string together a series of actions, creating customized workflows that save you time and effort. Our pipelines transform routine tasks into automated rituals, ensuring you can focus on what truly matters. </p><h3>Why Choose Nocturne:</h3><ul><li><b>Open-Source:</b> Nocturne is driven by the open-source spirit, meaning you have the freedom to inspect, modify, and enhance the editor to suit your unique needs.</li><li><b>Privacy First:</b> Your data is precious, and we respect that. Nocturne operates entirely on your device, safeguarding your information from prying eyes.</li><li><b>Simplicity and Power:</b> Our intuitive interface hides immense capabilities under the hood. Whether you&#39;re a casual user or a seasoned professional, Nocturne offers a seamless experience that scales with your expertise.</li></ul><h3>Join the Nocturne Community</h3><p> We invite you to embark on this PDF editing adventure with us. Join the Nocturne community of like-minded individuals who value privacy, efficiency, and the freedom to create. Explore our resources, share your insights, and contribute to the open-source movement that&#39;s reshaping how we interact with PDFs. </p><blockquote><i>Experience the magic of Nocturne â€“ where the night is illuminated by the glow of knowledge, and your PDFs are transformed into captivating narratives. Begin your journey today.</i></blockquote></div></div>',1),Ss=[Is];function Rs(o,n){return u(),p("div",Cs,Ss)}const Ns=W(Ps,[["render",Rs]]),Fs=[{path:"/",component:Ds},{path:"/about",component:Ns}],As=pe({history:me(),routes:Fs});"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js");ue(je).use(As).mount("#app");
